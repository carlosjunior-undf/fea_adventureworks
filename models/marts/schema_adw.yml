version: 2

models:
          
# =====================================================
  # DIM_ADW__CREDITCARD
# =====================================================
  - name: dim_adw__creditcard
    description: "Dimensão de cartão de crédito"
    columns:
      - name: cartao_credito_sk
        description: "Chave surrogada da dimensão de cartão de crédito"
        tests:
          - unique
          - not_null
      - name: cartao_credito_pk
        description: "Chave natural do cartão de crédito (origem)"
        tests:
          - unique
          - not_null

# =====================================================
  # DIM_ADW__CUSTOMER
# =====================================================
  - name: dim_adw__customer
    description: "Dimensão de clientes"
    columns:
      - name: cliente_sk
        description: "Chave surrogada da dimensão de clientes"
        tests:
          - unique
          - not_null
      - name: cliente_pk
        description: "Chave natural de território (origem)"
        tests:
          - unique
          - not_null

# =====================================================
  # DIM_ADW__DATE
# =====================================================
  - name: dim_adw__date
    description: "Dimensão de datas"
    columns:
      - name: data_sk
        description: "Chave surrogada da dimensão de data no formato YYYY-MM-DD"
        tests:
          - unique
          - not_null
      - name: data_pk
        description: "Chave natural de data (origem)"
        tests:
          - unique
          - not_null

# =====================================================
  # DIM_ADW__PRODUCT
# =====================================================
  - name: dim_adw__product
    description: "Dimensão de produtos"
    columns:
      - name: produto_sk
        description: "Chave surrogada da dimensão de produtos"
        tests:
          - unique
          - not_null
      - name: produto_pk
        description: "Chave natural do produto (origem)"
        tests:
          - unique
          - not_null

# =====================================================
  # DIM_ADW__STATUS
# =====================================================
  - name: dim_adw__status
    description: "Dimensão de status"
    columns:
      - name: status_sk
        description: "Chave surrogada da dimensão de status"
        tests:
          - unique
          - not_null
      - name: status_pk
        description: "Chave estrangeira do status"
        tests:
          - unique
          - not_null

# =====================================================
  # DIM_ADW__SALESREASON
# =====================================================
  - name: dim_adw__salesreason
    description: "Dimensão de Motivo de Venda"
    columns:
      - name: motivo_venda_sk
        description: "Chave surrogada da dimensão de Motivo de Venda"
        tests:
          - unique
          - not_null
      - name: motivo_venda_pk
        description: "Chave estrangeira de Motivo de Venda"
        tests:
          - unique
          - not_null


# =====================================================
  # FCT_ADW__SALES
# =====================================================
  - name: fct_adw__sales
    description: "Tabela fato vendas"
    columns:
      - name: sales_sk
        description: "Chave surrogada da tabela fato"
        tests:
          - unique
          - not_null

# =====================================================
  # TESTE_PEDIDO_CEO
# =====================================================
  - name: audit_adw__sales_2011
    description: "Teste de Faturamento bruto em 2011, solicitado pelo CEO"
    tests:
      - dbt_utils.expression_is_true:
          arguments:
            expression: "faturamento_2011 = 12646112.16"
