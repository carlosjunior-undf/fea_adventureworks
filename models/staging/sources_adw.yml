version: 2

sources:
  # =====================================================
  # SALES
  # =====================================================
  - name: adw_sales
    database: fea_academy
    schema: adventure_works
    description: "Dados transacionais de vendas da Adventure Works"
    tables:

      - name: sales_salesorderheader
        description: "Cabeçalho dos pedidos de venda"
        columns:
          - name: salesorderid
            description: "Identificador único do pedido"
            tests:
              - not_null
              - unique
          - name: customerid
            description: "Identificador do cliente"
            tests:
              - not_null
          - name: creditcardid
            description: "Identificador do cartão"
            tests:
              - not_null
          - name: status
            description: "Status do pedido"
            tests:
              - not_null
          - name: modifieddate
            description: "Data de modificação do pedido"
            tests:
              - not_null

      - name: sales_salesorderdetail
        description: "Itens dos pedidos de venda"
        columns:
          - name: salesorderdetailid
            description: "Identificador do item do pedido"
            tests:
              - not_null
              - unique
          - name: salesorderid
            description: "Identificador do pedido"
            tests:
              - not_null
              - relationships:
                  to: source('adw', 'sales_salesorderheader')
                  field: salesorderid
          - name: productid
            description: "Identificador do produto"
            tests:
              - not_null
          - name: orderqty
            description: "Quantidade comprada"
            tests:
              - not_null

      - name: sales_creditcard
        description: "Dados do cartão de crédito"
        columns:
          - name: creditcardid
            description: "Identificador do cartão de crédito"
            tests:
              - not_null
              - unique
          - name: cardtype
            description: "Tipo do cartão de crédito"
            tests:
              - not_null
          - name: cardnumber
            description: "Número do cartão de crédito"
            tests:
              - not_null

      - name: sales_personcreditcard
        description: "Tipos de cartão utilizados pelo cliente para compra"
        columns:
          - name: businessentityid
            description: "Identificador do dono do cartão"
            tests:
              - not_null
          - name: creditcardid
            description: "Identificador do cartão de crédito"
            tests:
              - not_null
          - name: modifieddate
            description: "Data de modificação do cartao do cliente"
            tests:
              - not_null

      - name: sales_salesreason
        description: "Motivos de venda"
        columns:
          - name: salesreasonid
            description: "Identificador do motivo"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do motivo"
            tests:
              - not_null

      - name: sales_salesorderheadersalesreason
        description: "Relacionamento pedido x motivo"
        columns:
          - name: salesorderid
            description: "Pedido"
            tests:
              - not_null
          - name: salesreasonid
            description: "Motivo"
            tests:
              - not_null

      - name: sales_customer
        description: "Clientes da Adventure Works"
        columns:
          - name: customerid
            description: "Identificador do cliente"
            tests:
              - not_null
              - unique
          - name: personid
            description: "Pessoa associada ao cliente"
            tests:
              - not_null
              - unique

      - name: sales_salesterritory
        description: "Território do Cliente"
        columns:
          - name: territoryid
            description: "Identificador do território do cliente"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do Território do Cliente"
            tests:
              - not_null
          - name: countryregioncode
            description: "Código da Região do País do Cliente"
            tests:
              - not_null
          - name: group
            description: "Código do Grupo da Região do Cliente"
            tests:
              - not_null

# =====================================================
  # PRODUCTION
  # =====================================================
  - name: adw_production
    database: fea_academy
    schema: adventure_works
    description: "Dados de produtos"

    tables:

      - name: production_product
        description: "Cadastro de produtos"
        columns:
          - name: productid
            description: "Identificador do produto"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do produto"
            tests:
              - not_null
          - name: color
            description: "Nome do produto"
            tests:
              - not_null
          - name: safetystocklevel
            description: "Nivel de segurança de produto em estoque"
            tests:
              - not_null
          - name: reorderpoint
            description: "Ponto de reabastecimento do estoque"
            tests:
              - not_null
          - name: standardcost
            description: "Custo padrão do produto"
            tests:
              - not_null
          - name: listprice
            description: "Preço de lista do produto"
            tests:
              - not_null
          - name: productsubcategoryid
            description: "Identificador da subcategoria do produto"
            tests:
              - not_null

      - name: production_productcategory
        description: "Categoria dos produtos"
        columns:
          - name: productcategoryid
            description: "Identificador da categoria do produto"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome da categoria do produto"
            tests:
              - not_null

      - name: production_productsubcategory
        description: "Subcategoria dos produtos"
        columns:
          - name: productsubcategoryid
            description: "Identificador da subcategoria do produto"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome da subcategoria da produto"
            tests:
              - not_null
          - name: productcategoryid
            description: "Identificador da categoria do produto"
            tests:
              - not_null

      - name: production_productcosthistory
        description: "Histórico de custo do produto"
        columns:
          - name: productid
            description: "Identificador do produto"
            tests:
              - not_null
          - name: startdate
            description: "Data de inicio do custo do produto"
            tests:
              - not_null
          - name: enddate
            description: "Data final do custo do produto"
            tests:
              - not_null
          - name: standardcost
            description: "Custo padrão do produto"
            tests:
              - not_null

      - name: production_location
        description: "Local de produção do produto"
        columns:
          - name: locationid
            description: "Identificador do local de produção do produto"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do local de produção do produto"
            tests:
              - not_null

      - name: production_productinventory
        description: "Inventário de Produção do Produto"
        columns:
          - name: productid
            description: "Identificador do produto"
            tests:
              - not_null
          - name: locationid
            description: "Identificador do local de produção do produto"
            tests:
              - not_null
          - name: shelf
            description: "Prateleira do local de produção do produto"
            tests:
              - not_null
          - name: quantity
            description: "Quantidade de produção do produto"
            tests:
              - not_null

      - name: production_productlistpricehistory
        description: "Histórico de preços da lista de produtos de produção"
        columns:
          - name: productid
            description: "Identificador do produto"
            tests:
              - not_null
          - name: startdate
            description: "Data de inicio do preço da lista de produtos de produção"
            tests:
              - not_null
          - name: enddate
            description: "Data de inicio do preço da lista de produtos de produção"
            tests:
              - not_null
          - name: listprice
            description: "Preços de lista de produtos de produção"
            tests:
              - not_null


# =====================================================
  # PERSON
  # =====================================================
  - name: adw_person
    database: fea_academy
    schema: adventure_works
    description: "Dados de pessoas e localização"

    tables:

      - name: person_person
        description: "Cadastro de pessoas"
        columns:
          - name: businessentityid
            description: "Identificador da Entidade/Pessoa"
            tests:
              - not_null
              - unique
          - name: firstname
            description: "Primeiro nome da pessoa"
            tests:
              - not_null
          - name: lastname
            description: "Sobrenome da pessoa"
            tests:
              - not_null

      - name: person_businessentity
        description: "Entidade/Pessoa"
        columns:
          - name: businessentityid
            description: "Identificador da Entidade/Pessoa"
            tests:
              - not_null

      - name: person_businessentityaddress
        description: "Endereço vinculado à Entidade Pessoa"
        columns:
          - name: businessentityid
            description: "Identificador da Entidade Pessoa"
            tests:
              - not_null
          - name: addressid
            description: "Identificador do endereço da entidade/pessoa"
            tests:
              - not_null

      - name: person_emailaddress
        description: "Emails das pessoas"
        columns:
          - name: businessentityid
            description: "Identificador das Entidade/Pessoa"
            tests:
              - not_null
          - name: emailaddressid
            description: "Identificador do email da entidade/pessoa"
            tests:
              - not_null
              - unique
          - name: emailaddress
            description: "Email da entidade/pessoa"
            tests:
              - not_null

      - name: person_personphone
        description: "Telefones da entidade/pessoa"
        columns:
          - name: businessentityid
            description: "Identificador da entidade pessoa"
            tests:
              - not_null
          - name: phonenumber
            description: "Número de Telefone da entidade pessoa"
            tests:
              - not_null

      - name: person_address
        description: "Endereços"
        columns:
          - name: addressid
            description: "Identificador do endereço"
            tests:
              - not_null
              - unique
          - name: city
            description: "Cidade"
            tests:
              - not_null
          - name: stateprovinceid
            description: "Estado"
            tests:
              - not_null

      - name: person_stateprovince
        description: "Estados"
        columns:
          - name: stateprovinceid
            description: "Identificador do estado"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do estado"
            tests:
              - not_null
          - name: countryregioncode
            description: "Código do país"
            tests:
              - not_null

      - name: person_countryregion
        description: "Países"
        columns:
          - name: countryregioncode
            description: "Código do país"
            tests:
              - not_null
              - unique
          - name: name
            description: "Nome do país"
            tests:
              - not_null